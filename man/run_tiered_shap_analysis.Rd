% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gRNA score SHAP analysis.R
\name{run_tiered_shap_analysis}
\alias{run_tiered_shap_analysis}
\title{Run tiered SHAP analysis across consensus metrics}
\usage{
run_tiered_shap_analysis(
  batch_result,
  modern_methods = c("deepspcas9", "deephf", "ruleset3"),
  legacy_methods = c("ruleset1"),
  n_top_features = 25,
  include_method_specific = FALSE,
  quiet = FALSE
)
}
\arguments{
\item{batch_result}{A mutateR_consensus_batch object}

\item{modern_methods}{Character vector. Modern scoring methods.}

\item{legacy_methods}{Character vector. Legacy methods.}

\item{n_top_features}{Integer. Number of top features to extract (default 25)}

\item{include_method_specific}{Logical. Also run SHAP for individual methods (default FALSE)}

\item{quiet}{Logical. Suppress progress messages (default FALSE)}
}
\value{
A list of class "mutateR_tiered_shap" containing:
\itemize{
\item modern_quality: SHAP for quality_percentile_modern
\item modern_discord: SHAP for discordance_modern
\item legacy_divergence: SHAP for legacy divergence
\item robust_quality: SHAP for quality_percentile_robust
\item comparison: Feature ranking comparison across analyses
\item method_specific: (optional) Individual method SHAP results
}
}
\description{
Executes SHAP analysis for multiple target variables representing different
aspects of gRNA quality and method agreement. This enables systematic
comparison of feature importance across:
\itemize{
\item Modern method consensus (primary quality metric)
\item Modern method disagreement (what causes DeepSpCas9/DeepHF/RuleSet3 to differ)
\item Legacy divergence (what RuleSet1 misses that modern methods catch)
\item Robust overall quality (outlier-resistant consensus)
}
}
\examples{
\dontrun{
library(BSgenome.Hsapiens.UCSC.hg38)

# Run batch analysis
batch <- analyze_score_consensus(
  c("TP53", "BRCA1", "EGFR"),
  "hsapiens",
  BSgenome.Hsapiens.UCSC.hg38
)

# Run tiered SHAP
shap_results <- run_tiered_shap_analysis(batch)

# View results
print(shap_results)

# Access individual analyses
shap_results$modern_quality$plots$beeswarm
shap_results$legacy_divergence$plots$beeswarm

# Compare feature rankings
shap_results$comparison
}

}
