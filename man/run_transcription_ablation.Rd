% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/SHAP_ablation.R
\name{run_transcription_ablation}
\alias{run_transcription_ablation}
\title{Run SHAP analysis removing transcription features from feature list}
\usage{
run_transcription_ablation(
  batch_result,
  target = "quality_percentile_modern",
  modern_methods = c("deepspcas9", "deephf", "ruleset3"),
  legacy_methods = c("ruleset1"),
  n_top_features = 20,
  include_extended = TRUE,
  rasterize = NULL,
  raster_dpi = 300,
  quiet = FALSE
)
}
\arguments{
\item{batch_result}{A mutateR_consensus_batch object}

\item{target}{Character. Target variable to model.
Default "quality_percentile_modern".}

\item{modern_methods}{Character vector of modern scoring methods.
Default: c("deepspcas9", "deephf", "ruleset3")}

\item{legacy_methods}{Character vector of legacy scoring methods.
Default: c("ruleset1")}

\item{n_top_features}{Integer. Number of top features to display (default 20)}

\item{include_extended}{Logical. Remove extended 5' features too (default TRUE)}

\item{rasterize}{Logical. Rasterize beeswarm plots (default NULL = auto)}

\item{raster_dpi}{Integer. DPI for rasterization (default 300)}

\item{quiet}{Logical. Suppress progress messages (default FALSE)}
}
\value{
A mutateR_shap_analysis object with additional ablation metadata:
\describe{
\item{metadata$ablation$type}{"transcription"}
\item{metadata$ablation$features_removed}{Character vector of removed features}
\item{metadata$ablation$context}{Description of simulated context}
}
}
\description{
Performs SHAP analysis with transcription-related features removed,
simulating the feature importance profile for synthetic gRNA delivery.
}
\details{
Features like \code{freq_TT} (Pol III termination), \code{pos1_C} (poor U6
initiation), and \code{max_homopolymer} dominate standard SHAP analyses
because they affect transcription, not intrinsic Cas9 activity. This analysis
removes transcription-relevant factors to 'unmask' other important elements.

Note: This is a simulated experimental framework, which should be interpreted
with caution. The gold standard is a gRNA efficiency dataset from RNPs (i.e.
not transcribed).
}
\section{Comparison with Full Analysis}{

After running ablation, compare with full analysis:
\preformatted{
full_shap <- analyze_feature_importance(batch, target = "quality_percentile_modern")
ablated_shap <- run_transcription_ablation(batch, target = "quality_percentile_modern")

comp <- compare_shap_analyses(full_shap, ablated_shap,
                              label1 = "Full", label2 = "Intrinsic")
print(comp$plot)
}
}

\section{Expected Changes}{

Removing transcription features typically:
\itemize{
\item Reduces model RÂ² (transcription features explain substantial variance)
\item Elevates seed region features (pos14-20) in importance
\item Increases relative importance of GC content features
\item May reveal thermodynamic/structural features previously masked
}
}

\examples{
\dontrun{
library(BSgenome.Hsapiens.UCSC.hg38)

# Run batch analysis
batch <- analyze_score_consensus(
  c("TP53", "BRCA1", "EGFR"),
  "hsapiens",
  BSgenome.Hsapiens.UCSC.hg38
)

# Full analysis
full_shap <- analyze_feature_importance(batch)

# Ablation analysis (synthetic gRNA context)
ablated_shap <- run_transcription_ablation(batch)

# Compare
print(full_shap)
print(ablated_shap)

# Detailed comparison
comp <- compare_shap_analyses(full_shap, ablated_shap,
                              label1 = "Plasmid", label2 = "Synthetic")
comp$plot
}

}
\seealso{
\code{\link{get_transcription_features}} for feature list,
\code{\link{compare_shap_analyses}} for comparing results,
\code{\link{run_custom_ablation}} for custom feature ablation
}
